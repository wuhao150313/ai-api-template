# 校园智能助手 API 文档说明

本文档集合提供了校园智能助手 API 的完整接口定义，适用于前端开发者和 AI 代理使用。

## 📚 文档列表

### 1. 校园智能助手API接口文档-AI版.md
**格式**: Markdown  
**用途**: 详细的接口说明文档，包含完整的接口定义、使用示例、最佳实践等  
**适合**: 人类阅读和 AI 理解

**主要内容**：
- 接口详细说明
- JSON Schema 定义
- 请求/响应示例
- TypeScript 类型定义
- 前端集成指南
- 错误处理
- 最佳实践

### 2. 校园智能助手API接口定义.json
**格式**: JSON (JSON Schema)  
**用途**: 结构化的接口定义，便于 AI 自动解析  
**适合**: AI 代理直接解析和生成代码

**主要内容**：
- 完整的 JSON Schema 定义
- 接口元数据
- 请求/响应 Schema
- Agent 功能说明
- TypeScript 类型定义
- 使用说明

### 3. 校园智能助手API-OpenAPI.yaml
**格式**: OpenAPI 3.0 (YAML)  
**用途**: 标准化的 API 文档格式  
**适合**: API 文档工具（如 Swagger UI）、代码生成工具

**主要内容**：
- OpenAPI 3.0 标准格式
- 完整的接口定义
- 请求/响应示例
- 多轮对话示例

### 4. 前端接口封装示例.ts
**格式**: TypeScript  
**用途**: 可直接使用的前端封装代码  
**适合**: 前端开发者直接集成

**主要内容**：
- TypeScript 类型定义
- API 封装函数
- 会话管理类
- 使用示例
- 错误处理工具

## 🚀 快速开始

### 对于前端开发者

1. **查看详细文档**: 阅读 `校园智能助手API接口文档-AI版.md`
2. **使用封装代码**: 直接使用 `前端接口封装示例.ts` 中的代码
3. **参考示例**: 查看文档中的使用示例

### 对于 AI 代理

1. **解析 JSON Schema**: 使用 `校园智能助手API接口定义.json` 自动生成代码
2. **解析 OpenAPI**: 使用 `校园智能助手API-OpenAPI.yaml` 生成客户端代码
3. **理解接口**: 参考 Markdown 文档了解接口细节

## 📋 接口概览

| 接口 | 方法 | 路径 | 状态管理 | 说明 |
|------|------|------|----------|------|
| 简单对话 | GET | `/api/v1/chat` | ❌ 无 | 快速测试、简单查询 |
| 高级对话 | POST | `/api/v2/chat` | ✅ 有 | 多轮对话、个性化服务 |
| 查询历史 | GET | `/api/v2/history/{userId}` | - | 查询对话历史 |

## 🔑 关键概念

### userId
- **作用**: 用于维护对话上下文
- **规则**: 相同 userId 的请求会共享同一个 threadId
- **管理**: 
  - 登录用户：使用用户ID
  - 游客用户：使用浏览器存储生成唯一ID

### threadId
- **作用**: 标识对话会话
- **生成**: 由后端自动生成和管理
- **存储**: 建议保存到本地存储，用于调试

### 多轮对话
- **实现**: 使用相同的 userId 发送多次请求
- **特点**: AI 会记住之前的对话内容
- **示例**: 
  1. 用户说："我是学号20220001的学生"
  2. 用户说："帮我查一下我的课程表"
  3. AI 会记住学号，自动关联上下文

## 💡 使用建议

### 选择接口版本

- **v1 (简单对话)**: 
  - ✅ 快速测试
  - ✅ 简单查询
  - ✅ 不需要上下文
  
- **v2 (高级对话)**: 
  - ✅ 多轮对话
  - ✅ 个性化服务
  - ✅ 需要上下文记忆

### 错误处理

- 网络错误：检查网络连接
- 参数错误：验证请求参数
- 服务错误：查看服务器日志

### 性能优化

- 简单查询使用 v1 接口（更快）
- 需要上下文使用 v2 接口
- 合理设置请求超时时间

## 📖 代码示例

### 简单对话
```typescript
import { simpleChat } from './前端接口封装示例';

const answer = await simpleChat('今天天气怎么样');
console.log(answer);
```

### 高级对话
```typescript
import { advancedChat } from './前端接口封装示例';

const response = await advancedChat('user123', '帮我查一下今天的天气');
console.log(response.answer);
```

### 多轮对话
```typescript
import { ChatSession } from './前端接口封装示例';

const session = new ChatSession('user123');
const response1 = await session.sendMessage('我是学号20220001的学生');
const response2 = await session.sendMessage('帮我查一下我的课程表');
```

## 🔧 配置

### 修改基础URL
在 `前端接口封装示例.ts` 中修改：
```typescript
const BASE_URL = 'http://localhost:8082';  // 改为实际的后端地址
```

## 📝 更新日志

- **v1.0.0** (2025-11-26)
  - 初始版本
  - 包含简单对话和高级对话接口
  - 提供完整的文档和代码示例

## 🤝 贡献

如有问题或建议，请联系开发团队。

---

**文档维护**: 开发团队  
**最后更新**: 2025-11-26





